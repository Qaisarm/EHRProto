<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenEHR Archetype Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f7fa;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .container {
            display: flex;
            height: calc(100vh - 100px);
        }
        
        .sidebar {
            width: 320px;
            background-color: white;
            border-right: 1px solid #e1e8ed;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
        }
        
        .sidebar-header {
            padding: 15px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e1e8ed;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .category {
            padding: 12px 15px;
            font-weight: 600;
            color: #667eea;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e1e8ed;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .archetype-link {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.2s;
            font-size: 14px;
            color: #2c3e50;
        }
        
        .archetype-link:hover {
            background-color: #f8f9fa;
            padding-left: 25px;
        }
        
        .archetype-link.active {
            background-color: #667eea;
            color: white;
            border-left: 4px solid #764ba2;
        }
        
        .content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background-color: #f5f7fa;
        }
        
        .content-card {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        #archetype-title {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }
        
        .archetype-meta {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
        }
        
        .meta-item {
            display: flex;
            flex-direction: column;
        }
        
        .meta-label {
            font-size: 11px;
            text-transform: uppercase;
            color: #7f8c8d;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .meta-value {
            font-size: 14px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.6;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        
        .welcome-message {
            text-align: center;
            padding: 60px 20px;
            color: #7f8c8d;
        }
        
        .welcome-message h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .stats {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            text-transform: uppercase;
        }
        
        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background-color: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background-color: #ecf0f1;
            color: #2c3e50;
        }
        
        .btn-secondary:hover {
            background-color: #d5dbdb;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè• OpenEHR Archetype Viewer</h1>
        <p>Browse and explore healthcare archetypes and templates</p>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-header">üìö Archetype Library (16 Total)</div>
            
            <div class="category">üìÑ COMPOSITION (3)</div>
            <div class="archetype-link" data-path="composition/openEHR-EHR-COMPOSITION.gp_consultation.v1.adl">
                GP Consultation
            </div>
            <div class="archetype-link" data-path="composition/openEHR-EHR-COMPOSITION.xray_laboratory.v1.adl">
                X-ray Laboratory
            </div>
            <div class="archetype-link" data-path="composition/openEHR-EHR-COMPOSITION.xray_radiology_report.v1.adl">
                X-ray Radiology Report
            </div>
            
            <div class="category">üî¨ OBSERVATION (2)</div>
            <div class="archetype-link" data-path="observation/openEHR-EHR-OBSERVATION.vital_signs.v1.adl">
                Vital Signs
            </div>
            <div class="archetype-link" data-path="observation/openEHR-EHR-OBSERVATION.laboratory_test_result.v1.adl">
                Laboratory Test Result
            </div>
            
            <div class="category">ü©∫ EVALUATION (2)</div>
            <div class="archetype-link" data-path="evaluation/openEHR-EHR-EVALUATION.problem_diagnosis.v1.adl">
                Problem/Diagnosis
            </div>
            <div class="archetype-link" data-path="evaluation/openEHR-EHR-EVALUATION.clinical_risk_assessment.v1.adl">
                Clinical Risk Assessment
            </div>
            
            <div class="category">üìã INSTRUCTION (2)</div>
            <div class="archetype-link" data-path="instruction/openEHR-EHR-INSTRUCTION.medication_order.v1.adl">
                Medication Order
            </div>
            <div class="archetype-link" data-path="instruction/openEHR-EHR-INSTRUCTION.service_request.v1.adl">
                Service Request
            </div>
            
            <div class="category">‚úÖ ACTION (2)</div>
            <div class="archetype-link" data-path="action/openEHR-EHR-ACTION.medication_administration.v1.adl">
                Medication Administration
            </div>
            <div class="archetype-link" data-path="action/openEHR-EHR-ACTION.procedure.v1.adl">
                Procedure
            </div>
            
            <div class="category">üèõÔ∏è ADMIN_ENTRY (2)</div>
            <div class="archetype-link" data-path="admin_entry/openEHR-EHR-ADMIN_ENTRY.admission.v1.adl">
                Hospital Admission
            </div>
            <div class="archetype-link" data-path="admin_entry/openEHR-EHR-ADMIN_ENTRY.discharge.v1.adl">
                Hospital Discharge
            </div>
            
            <div class="category">üß© CLUSTER (3)</div>
            <div class="archetype-link" data-path="cluster/openEHR-EHR-CLUSTER.patient_identification.v1.adl">
                Patient Identification
            </div>
            <div class="archetype-link" data-path="cluster/openEHR-EHR-CLUSTER.person_demographics.v1.adl">
                Person Demographics
            </div>
            <div class="archetype-link" data-path="cluster/openEHR-DEMOGRAPHIC-CLUSTER.registration_other_data.v1.adl">
                Registration Other Data
            </div>
        </div>
        
        <div class="content">
            <div class="content-card">
                <div class="welcome-message">
                    <h2>Welcome to the OpenEHR Archetype Viewer</h2>
                    <p>Select an archetype from the sidebar to view its content</p>
                    
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-number">16</div>
                            <div class="stat-label">Total Archetypes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">7</div>
                            <div class="stat-label">Entry Types</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">ADL 1.4</div>
                            <div class="stat-label">Format Version</div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <a href="https://tools.openehr.org/designer/" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
                            üîß Open in Archetype Designer
                        </a>
                        <a href="archetypes/ARCHETYPE_MANIFEST.md" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
                            üìã View Manifest
                        </a>
                        <a href="USAGE_GUIDE.md" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
                            üìñ Usage Guide
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const links = document.querySelectorAll('.archetype-link');
        
        links.forEach(link => {
            link.addEventListener('click', function() {
                const path = this.getAttribute('data-path');
                loadArchetype(path, this);
            });
        });
        
        function loadArchetype(path, element) {
            // Remove active class from all links
            links.forEach(l => l.classList.remove('active'));
            // Add active class to clicked link
            if (element) element.classList.add('active');
            
            const fullPath = 'archetypes/' + path;
            const fileName = path.split('/').pop();
            const category = path.split('/')[0].toUpperCase();
            
            fetch(fullPath)
                .then(response => {
                    if (!response.ok) throw new Error('File not found');
                    return response.text();
                })
                .then(data => {
                    document.querySelector('.content').innerHTML = `
                        <div class="content-card">
                            <h2 id="archetype-title">${fileName}</h2>
                            <div class="archetype-meta">
                                <div class="meta-item">
                                    <span class="meta-label">Category</span>
                                    <span class="meta-value">${category}</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Format</span>
                                    <span class="meta-value">ADL 1.4</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Lines</span>
                                    <span class="meta-value">${data.split('\\n').length}</span>
                                </div>
                            </div>
                            <div class="action-buttons">
                                <button class="btn btn-primary" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
                                <a href="${fullPath}" download class="btn btn-secondary">üíæ Download</a>
                            </div>
                            <pre id="archetype-content">${escapeHtml(data)}</pre>
                        </div>
                    `;
                })
                .catch(error => {
                    document.querySelector('.content').innerHTML = `
                        <div class="content-card">
                            <div class="welcome-message">
                                <h2>‚ö†Ô∏è Error Loading Archetype</h2>
                                <p>Could not load the archetype file. Please ensure you are running this from a web server.</p>
                                <div style="margin-top: 20px; text-align: left; background: #f8f9fa; padding: 20px; border-radius: 6px;">
                                    <p><strong>To run a local web server:</strong></p>
                                    <pre style="background: #2c3e50; color: white; padding: 15px; margin-top: 10px;">python3 -m http.server 8000</pre>
                                    <p style="margin-top: 10px;">Then open: <code>http://localhost:8000/viewer.html</code></p>
                                </div>
                            </div>
                        </div>
                    `;
                });
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function copyToClipboard() {
            const content = document.getElementById('archetype-content').textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert('‚úÖ Archetype content copied to clipboard!');
            }).catch(err => {
                alert('‚ùå Failed to copy to clipboard');
            });
        }
    </script>
</body>
</html>
